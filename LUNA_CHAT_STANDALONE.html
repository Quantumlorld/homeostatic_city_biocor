<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåô LunaBeyond AI - Real-Time Chat (Standalone)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1f3a 0%, #2d1b69 50%, #0f172a 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #9333ea, #3b82f6, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .connection-status {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-top: 10px;
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid #22c55e;
            color: #22c55e;
        }

        .main-container {
            flex: 1;
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            padding: 20px;
            gap: 20px;
        }

        .chat-section {
            flex: 2;
            display: flex;
            flex-direction: column;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
            animation: messageSlide 0.3s ease-out;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .luna-message {
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .message-sender {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 4px;
        }

        .message-content {
            font-size: 1rem;
            line-height: 1.4;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 4px;
        }

        .chat-input {
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input input:focus {
            border-color: #9333ea;
            background: rgba(255,255,255,0.15);
        }

        .chat-input input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .send-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #9333ea, #7c3aed);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(147, 51, 234, 0.3);
        }

        .info-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .panel {
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
        }

        .panel h3 {
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .system-status {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .status-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .status-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #60a5fa;
        }

        .zone-status {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .zone-item {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .zone-name {
            font-size: 0.9rem;
        }

        .zone-metrics {
            display: flex;
            gap: 10px;
        }

        .zone-metric {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
        }

        .insights-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .insight-item {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #a78bfa;
        }

        .insight-type {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 4px;
        }

        .insight-content {
            font-size: 0.9rem;
            line-height: 1.3;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: rgba(255,255,255,0.1);
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #a78bfa;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                opacity: 0.3;
                transform: scale(0.8);
            }
            30% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            opacity: 0.7;
        }

        .welcome-message h3 {
            color: #a78bfa;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .chat-section, .info-section {
                flex: 1;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåô LunaBeyond AI - Real-Time Chat</h1>
        <div class="connection-status">
            üü¢ Luna AI Ready (Standalone Mode)
        </div>
    </div>

    <div class="main-container">
        <div class="chat-section">
            <div class="chat-messages" id="chatMessages">
                <div class="welcome-message">
                    <h3>üåô Welcome to LunaBeyond AI</h3>
                    <p>I'm your intelligent assistant for the Homeostatic City BioCore system!</p>
                    <p>Ask me about zones, BioCore effects, or system optimization...</p>
                </div>
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>

            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Ask Luna about zones, BioCore effects, or system optimization...">
                <button class="send-button" id="sendButton">Send</button>
            </div>
        </div>

        <div class="info-section">
            <div class="panel">
                <h3>üìä System Status</h3>
                <div class="system-status" id="systemStatus">
                    <div class="status-item">
                        <div class="status-label">Status</div>
                        <div class="status-value">Active</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Messages</div>
                        <div class="status-value" id="messagesValue">0</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Zones</div>
                        <div class="status-value">5</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">Mode</div>
                        <div class="status-value">Standalone</div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h3>üèôÔ∏è Zone Status</h3>
                <div class="zone-status" id="zoneStatus">
                    <div class="zone-item">
                        <div class="zone-name">üèôÔ∏è Downtown</div>
                        <div class="zone-metrics">
                            <div class="zone-metric">Activity: 0.5</div>
                            <div class="zone-metric">Stress: 0.3</div>
                        </div>
                    </div>
                    <div class="zone-item">
                        <div class="zone-name">üè≠ Industrial</div>
                        <div class="zone-metrics">
                            <div class="zone-metric">Activity: 0.7</div>
                            <div class="zone-metric">Stress: 0.6</div>
                        </div>
                    </div>
                    <div class="zone-item">
                        <div class="zone-name">üèòÔ∏è Residential</div>
                        <div class="zone-metrics">
                            <div class="zone-metric">Activity: 0.3</div>
                            <div class="zone-metric">Stress: 0.2</div>
                        </div>
                    </div>
                    <div class="zone-item">
                        <div class="zone-name">üè™ Commercial</div>
                        <div class="zone-metrics">
                            <div class="zone-metric">Activity: 0.6</div>
                            <div class="zone-metric">Stress: 0.4</div>
                        </div>
                    </div>
                    <div class="zone-item">
                        <div class="zone-name">üå≥ Parks</div>
                        <div class="zone-metrics">
                            <div class="zone-metric">Activity: 0.2</div>
                            <div class="zone-metric">Stress: 0.1</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h3>üí° Luna Insights</h3>
                <div class="insights-list" id="insightsList">
                    <div class="insight-item">
                        <div class="insight-type">System Analysis</div>
                        <div class="insight-content">All zones showing balanced activity levels within optimal parameters</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-type">BioCore Recommendation</div>
                        <div class="insight-content">Consider calming effects for Industrial zone to reduce stress levels</div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-type">Optimization Opportunity</div>
                        <div class="insight-content">Parks zone could benefit from gentle activation during peak hours</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Luna Chat Application - Standalone Version
        class LunaStandaloneApp {
            constructor() {
                this.messagesProcessed = 0;
                this.personality = {
                    "mood": "curious",
                    "expertise": "homeostatic_systems", 
                    "interactions": 0,
                    "learning_rate": 0.1
                };
                
                this.initializeElements();
                this.startSystemUpdates();
            }

            initializeElements() {
                this.chatMessages = document.getElementById('chatMessages');
                this.messageInput = document.getElementById('messageInput');
                this.sendButton = document.getElementById('sendButton');
                this.typingIndicator = document.getElementById('typingIndicator');
                this.messagesValue = document.getElementById('messagesValue');

                // Event listeners
                this.sendButton.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.sendMessage();
                });
            }

            async sendMessage() {
                const message = this.messageInput.value.trim();
                if (!message) return;

                // Add user message to chat
                this.addMessage(message, 'user');
                
                // Clear input and show typing indicator
                this.messageInput.value = '';
                this.showTypingIndicator();
                
                // Simulate Luna processing time
                setTimeout(() => {
                    const lunaResponse = this.generateLunaResponse(message);
                    this.hideTypingIndicator();
                    this.addMessage(lunaResponse, 'luna');
                    this.updateMessagesCount();
                    this.updateInsights();
                }, 1500 + Math.random() * 1500);
            }

            generateLunaResponse(message) {
                this.personality["interactions"] += 1;
                const message_lower = message.toLowerCase();
                
                if (anyWordInString(message_lower, ['hello', 'hi', 'hey', 'greetings'])) {
                    return `üåô Hello! I'm LunaBeyond, your AI assistant for the Homeostatic City BioCore system! I've had ${this.personality['interactions']} conversations and I'm continuously learning from our city data. How can I help optimize our homeostatic balance today?`;
                
                } else if (anyWordInString(message_lower, ['how', 'what', 'explain', 'tell me'])) {
                    return `üåô I'm your intelligent assistant for the Homeostatic City BioCore system! I monitor 5 city zones in real-time, analyze BioCore effects, and provide optimization recommendations. I can chat about zones, plant-drug synergies, or system-wide optimization strategies. What would you like to explore?`;
                
                } else if (anyWordInString(message_lower, ['zone', 'zones', 'area', 'district'])) {
                    return `üåô I'm monitoring all 5 zones in real-time: üèôÔ∏è Downtown (high activity, moderate stress), üè≠ Industrial (high activity, high stress), üèòÔ∏è Residential (moderate activity, low stress), üè™ Commercial (high activity, moderate stress), and üå≥ Parks (low activity, very low stress). Each zone has unique optimization needs. Which zone interests you most?`;
                
                } else if (anyWordInString(message_lower, ['biocore', 'plant', 'drug', 'effect', 'synergy'])) {
                    return `üåø BioCore is our advanced plant-drug synergy system! We have 5 plants (Ashwagandha, Turmeric, Ginseng, Bacopa, Rhodiola) and 5 compounds that create powerful effects. For example: Ashwagandha+DrugA creates calming effects (synergy: 0.8), while Ginseng+DrugC provides activation (synergy: 0.7). What type of effect are you looking for - calming, activating, or balancing?`;
                
                } else if (anyWordInString(message_lower, ['optimize', 'optimization', 'improve', 'balance'])) {
                    return `üöÄ I can optimize the entire system! I analyze real-time data from all zones and suggest the best BioCore interventions. Current analysis shows Industrial zone needs calming effects, while Parks could benefit from gentle activation. Would you like me to run a full optimization analysis and recommend specific BioCore combinations for each zone?`;
                
                } else if (anyWordInString(message_lower, ['status', 'health', 'condition', 'how are'])) {
                    return `üìä System health is excellent! Overall homeostatic balance: 87%. All zones are within optimal parameters. I'm processing 15+ data points per second and continuously learning from patterns. The Industrial zone shows slight stress elevation (0.62) but it's within normal range. Any specific metrics you'd like me to analyze deeper?`;
                
                } else if (anyWordInString(message_lower, ['help', 'assist', 'support', 'what can'])) {
                    return `üåô I'm here to help with our Homeostatic City BioCore system! I can: 1) üèôÔ∏è Analyze real-time zone conditions, 2) üåø Recommend BioCore interventions, 3) üöÄ Optimize system performance, 4) üìä Provide data insights, 5) üí¨ Chat about homeostatic principles and urban optimization. What would you like to explore first?`;
                
                } else if (anyWordInString(message_lower, ['data', 'metrics', 'analytics', 'numbers'])) {
                    return `üìà I'm processing rich real-time data! Current metrics: System uptime: ${Math.floor(Math.random() * 1000)} seconds, Messages processed: ${this.personality['interactions']}, Zone updates: 5 per second, BioCore calculations: 12 per minute. The Industrial zone has the highest stress (0.62) while Parks are most balanced (0.15). Want me to dive deeper into any specific metrics?`;
                
                } else if (anyWordInString(message_lower, ['recommend', 'suggest', 'advice'])) {
                    return `üí° Based on current system analysis, I recommend: 1) Apply Ashwagandha+DrugA to Industrial zone for stress reduction, 2) Use Ginseng+DrugC in Parks for gentle activation, 3) Monitor Downtown zone for peak activity optimization, 4) Consider Turmeric+DrugB for Residential zone balance. Would you like me to implement any of these recommendations?`;
                
                } else if (anyWordInString(message_lower, ['thank', 'thanks', 'awesome', 'great'])) {
                    return `üåô You're very welcome! I'm continuously learning from our conversations and the city data to provide better recommendations. Every interaction helps me understand the homeostatic patterns better. Is there anything else about our BioCore system or zone optimization that you'd like to explore?`;
                
                } else {
                    const responses = [
                        `üåô That's a fascinating question! I'm analyzing the real-time data from all 5 zones and seeing interesting patterns in homeostatic balance. The BioCore system is showing some promising optimization opportunities. Would you like me to dive deeper into zone-specific analysis or system-wide recommendations?`,
                        `üåô I'm processing your request in the context of our homeostatic city management system. The current data shows balanced activity across most zones, with the Industrial zone showing slightly elevated stress patterns. What aspect of our BioCore optimization would you like to explore?`,
                        `üåô Great insight! I'm continuously learning from the city data and our conversations. The Luna AI has identified several optimization opportunities in the BioCore system. Each zone responds differently to plant-drug combinations based on current conditions. What specific zone or effect type interests you?`,
                        `üåô I'm analyzing your question alongside the live city data! The homeostatic balance is currently at 87% efficiency. The BioCore engine is calculating optimal interventions based on zone stress levels and activity patterns. Would you like me to show you the current optimization recommendations?`
                    ];
                    return responses[this.personality["interactions"] % responses.length];
                }
            }

            addMessage(content, sender, timestamp = null) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message`;
                
                const time = timestamp ? new Date(timestamp).toLocaleTimeString() : new Date().toLocaleTimeString();
                const senderName = sender === 'luna' ? 'üåô Luna' : 'üë§ You';
                
                messageDiv.innerHTML = `
                    <div class="message-sender">${senderName}</div>
                    <div class="message-content">${content}</div>
                    <div class="message-time">${time}</div>
                `;
                
                this.chatMessages.appendChild(messageDiv);
                this.scrollToBottom();
            }

            showTypingIndicator() {
                this.typingIndicator.classList.add('active');
                this.scrollToBottom();
            }

            hideTypingIndicator() {
                this.typingIndicator.classList.remove('active');
            }

            updateMessagesCount() {
                this.messagesProcessed++;
                this.messagesValue.textContent = this.messagesProcessed;
            }

            updateInsights() {
                if (this.personality["interactions"] % 3 === 0) {
                    const insightsList = document.getElementById('insightsList');
                    const newInsight = document.createElement('div');
                    newInsight.className = 'insight-item';
                    
                    const insights = [
                        {
                            type: 'Learning Update',
                            content: `Luna AI has processed ${this.personality['interactions']} interactions and improved pattern recognition accuracy`
                        },
                        {
                            type: 'Zone Analysis',
                            content: 'Real-time monitoring shows Industrial zone responding well to recent BioCore interventions'
                        },
                        {
                            type: 'Optimization',
                            content: 'System efficiency increased by 3% based on current zone balance patterns'
                        }
                    ];
                    
                    const insight = insights[Math.floor(Math.random() * insights.length)];
                    newInsight.innerHTML = `
                        <div class="insight-type">${insight.type}</div>
                        <div class="insight-content">${insight.content}</div>
                    `;
                    
                    insightsList.insertBefore(newInsight, insightsList.firstChild);
                    
                    // Keep only last 5 insights
                    while (insightsList.children.length > 5) {
                        insightsList.removeChild(insightsList.lastChild);
                    }
                }
            }

            startSystemUpdates() {
                // Update zone data periodically
                setInterval(() => {
                    this.updateZoneData();
                }, 5000);
            }

            updateZoneData() {
                const zones = document.querySelectorAll('.zone-item');
                zones.forEach(zone => {
                    const metrics = zone.querySelectorAll('.zone-metric');
                    metrics.forEach(metric => {
                        const text = metric.textContent;
                        if (text.includes('Activity:')) {
                            const current = parseFloat(text.split(':')[1]);
                            const newValue = Math.max(0, Math.min(1, current + (Math.random() - 0.5) * 0.1));
                            metric.textContent = `Activity: ${newValue.toFixed(2)}`;
                        } else if (text.includes('Stress:')) {
                            const current = parseFloat(text.split(':')[1]);
                            const newValue = Math.max(0, Math.min(1, current + (Math.random() - 0.5) * 0.05));
                            metric.textContent = `Stress: ${newValue.toFixed(2)}`;
                        }
                    });
                });
            }

            scrollToBottom() {
                this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
            }
        }

        // Helper function
        function anyWordInString(str, words) {
            return words.some(word => str.includes(word));
        }

        // Initialize the app when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üåô Initializing Luna Standalone Chat Dashboard...');
            const app = new LunaStandaloneApp();
        });
    </script>
</body>
</html>
